!function(e){var t={};function n(d){if(t[d])return t[d].exports;var a=t[d]={i:d,l:!1,exports:{}};return e[d].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,d){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(d,a,function(t){return e[t]}.bind(null,a));return d},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n="https://www.design-dude.nl/apps/ddSpiral/",d={type:4,shape:"",isSpiral:!1,pathID:"",startID:"",endID:"",parentID:"",theme:""},a={x:0,y:0,w:0,h:0,deg:0,worldDeg:0},i={x:0,y:0,w:0,h:0,deg:0,worldDeg:0},o=10,l=4,s="linear",c=100,r=30,u=!0,m=!1,g=!1,y=!1,h=!1,p=!1,E=["start_width","start_height","start_rotation","end_width","end_height","end_rotation","loops","points","timing","smooth","power","squeeze","clockwise","mirror","auto"];function f(e){window.postMessage("followLink",e)}Math.decimal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},Math.degrees=function(e){return(e+360)%360},document.addEventListener("contextmenu",(function(e){e.preventDefault()})),window.internalResponse=function(e){console.log("requestedData",e)},window.addEventListener("load",(function(){k("Loading...","#FF5B02"),document.getElementById("github").addEventListener("click",(function(e){f("https://github.com/Design-Dude/ddSpiral")})),document.getElementById("coffeelink").style.display="none",document.getElementById("coffeelink").setAttribute("goto","https://buymeacoffee.com/mastermek"),document.getElementById("coffeelink").addEventListener("click",(function(e){f(e.target.parentElement.getAttribute("goto"))})),window.postMessage("internalRequest",JSON.stringify({action:"getSelection"})),I(n+"info.php").then((function(e){!(e=JSON.parse(e))||"update"!=e.action&&"info"!=e.action||(document.getElementById("bmac").innerHTML=e[0].info,document.getElementById("bmacimg").setAttribute("src",n+e[0].image),document.getElementById("bmacimgdark").setAttribute("src",n+e[0].image_dark),document.getElementById("coffeelink").setAttribute("goto",e[0].link)),document.getElementById("coffeelink").style.display="flex"})).catch((function(e){document.getElementById("coffeelink").style.display="flex"}))}));var I=function(e){return new Promise((function(t,n){e&&""!=e?fetch(e).then((function(e){t(e.text())})).then((function(e){t(e?JSON.parse(e):{})})).catch((function(e){n(e)})):n("No url provided")}))};function B(){document.getElementById("button").innerHTML="Update",p=!0,a.deg=Math.degrees(a.deg-a.worldDeg),i.deg=Math.degrees(i.deg-i.worldDeg);var e={loops:o,points:l,smooth:c,timing:s,power:r,squeeze:!(0!=document.getElementById("squeeze").disabled||!m),mirror:!(0!=document.getElementById("mirror").disabled||!g),clockwise:u,auto:y,type:d.type,pathID:d.pathID,startID:d.startID,endID:d.endID,parentID:d.parentID},t={start_val:a,end_val:i,settings:e,action:"spiralise"};window.postMessage("internalRequest",JSON.stringify(t)),a.deg=Math.degrees(a.deg+a.worldDeg),i.deg=Math.degrees(i.deg+i.worldDeg)}function v(e){document.getElementById("button").innerHTML="Spiralise!",p=!1,d=e.selection,a=e.start_val,i=e.end_val,o="undefined"!=d.loops&&d.loops?d.loops:o,document.getElementById("loops").value=o,l="undefined"!=d.points&&d.points?d.points:l,document.getElementById("points").value=l,c="undefined"!=d.smooth&&d.smooth?d.smooth:c,document.getElementById("smooth").value=c,s="undefined"!=d.timing&&d.timing?d.timing:s,document.getElementById("timing").value=s,r="undefined"!=d.power&&d.power?d.power:r,document.getElementById("power").value=r,(m="undefined"!=d.squeeze?d.squeeze:m)&&(1==d.type||d.type>3)&&(m=!1),2!=d.type||m||(d.type=3),document.getElementById("squeeze").checked=m,g="undefined"!=d.mirror?d.mirror:g,document.getElementById("mirror").checked=g,u="undefined"!=d.clockwise?d.clockwise:u,document.getElementById("clockwise").checked=u,y="undefined"!=d.auto?d.auto:y,document.getElementById("auto").checked=y,4==d.type&&g&&b(),a.deg=Math.degrees(a.deg+a.worldDeg),i.deg=Math.degrees(i.deg+i.worldDeg),document.getElementById("start_width").value=Math.decimal(a.w,2),document.getElementById("start_height").value=Math.decimal(a.h,2),document.getElementById("start_rotation").value=Math.decimal(a.deg,2),document.getElementById("end_width").value=Math.decimal(i.w,2),document.getElementById("end_height").value=Math.decimal(i.h,2),document.getElementById("end_rotation").value=Math.decimal(i.deg,2),w(),settings.theme=d.theme,"dark"===settings.theme?document.body.classList.add("dark"):document.body.classList.remove("dark"),h&&d.type?M():_()}function b(){var e=a.w,t=a.h,n=a.deg;a.w=i.w,a.h=i.h,a.deg=i.deg,i.w=e,i.h=t,i.deg=n}function w(){var e=d.isSpiral?"spiral!":"line";switch(d.type){case 1:k("Wind <span>around the center</span> of that object","dark"===settings.theme?"#DFDFDF":"black");break;case 2:k("Force <span>inside</span> that "+d.shape,"dark"===settings.theme?"#DFDFDF":"black");break;case 3:k("Bend <span>around the center</span> of that "+d.shape,"dark"===settings.theme?"#DFDFDF":"black");break;case 4:k("Twist <span>around</span> that "+e,"dark"===settings.theme?"#DFDFDF":"black");break;case 5:k("Stretch <span>between</span> those objects","dark"===settings.theme?"#DFDFDF":"black");break;case 6:k("Curve <span>along the route</span> of that "+e,"dark"===settings.theme?"#DFDFDF":"black");break;default:k("<span>Select a maximum of 2 objects and/or 1 open path!</span>","#FF5B02"),_()}}function k(e,t){document.getElementById("info").innerHTML=e,document.getElementById("info").style.color=t}function _(){for(var e=0;e<E.length;e++){document.getElementById(E[e]).setAttribute("disabled",""),!d.type||m&&(E[e].indexOf("start")>-1||E[e].indexOf("end")>-1)||(d.type<2||d.type>3)&&"squeeze"==E[e]?document.getElementById(E[e]).style.opacity="squeeze"==E[e]||"clockwise"==E[e]||"mirror"==E[e]||"auto"==E[e]?.5:0:document.getElementById(E[e]).style.opacity="squeeze"==E[e]||"clockwise"==E[e]||"mirror"==E[e]||"auto"==E[e]?.5:.3;var t=document.getElementById(E[e]).parentElement;t.classList.contains("textfield")&&(t.setAttribute("disabled","disabled"),t.style.backgroundColor="dark"===settings.theme?"#282828":"#F6F6F6")}document.getElementById("link_start").setAttribute("disabled","disabled"),document.getElementById("link_start").style.opacity=.3,document.getElementById("link_end").setAttribute("disabled","disabled"),document.getElementById("link_end").style.opacity=.3,document.getElementById("button").setAttribute("disabled","disabled"),document.getElementById("button").style.opacity=.3,document.getElementById("squeeze_text").style.opacity=.2,document.getElementById("clockwise_text").style.opacity=.2,document.getElementById("mirror_text").style.opacity=.2,document.getElementById("auto_text").style.opacity=.2}function M(){var e=document.getElementById("squeeze").checked;document.getElementById("mirror_text").style.opacity=1;for(var t=0;t<E.length;t++)if("power"==E[t]&&"linear"==s){document.getElementById(E[t]).setAttribute("disabled",""),document.getElementById(E[t]).style.opacity=0;var n=document.getElementById(E[t]).parentElement;n.classList.contains("textfield")&&(n.setAttribute("disabled","disabled"),n.style.backgroundColor="dark"===settings.theme?"#282828":"#F6F6F6")}else if("mirror"==E[t]&&4!=d.type)document.getElementById(E[t]).disabled=!0,document.getElementById("mirror_text").style.opacity=.2;else if(e&&(E[t].indexOf("start")>-1||E[t].indexOf("end")>-1)||(d.type<2||d.type>3)&&"squeeze"==E[t]){document.getElementById(E[t]).setAttribute("disabled",""),document.getElementById(E[t]).style.opacity="squeeze"==E[t]||"clockwise"==E[t]?.5:0;var a=document.getElementById(E[t]).parentElement;a.classList.contains("textfield")&&(a.setAttribute("disabled","disabled"),a.style.backgroundColor="dark"===settings.theme?"#282828":"#F6F6F6")}else{document.getElementById(E[t]).disabled=!1,document.getElementById(E[t]).style.opacity=1;var i=document.getElementById(E[t]).parentElement;i.classList.contains("textfield")&&(i.setAttribute("disabled",""),i.style.backgroundColor="dark"===settings.theme?"#2E2E2E":"#EDEDED")}e?(document.getElementById("link_start").setAttribute("disabled","disabled"),document.getElementById("link_start").style.opacity=.3,document.getElementById("link_end").setAttribute("disabled","disabled"),document.getElementById("link_end").style.opacity=.3):(document.getElementById("link_start").setAttribute("disabled",""),document.getElementById("link_start").style.opacity=1,document.getElementById("link_end").setAttribute("disabled",""),document.getElementById("link_end").style.opacity=1),y&&p?(document.getElementById("button").setAttribute("disabled","disabled"),document.getElementById("button").style.opacity=.3):(document.getElementById("button").disabled=!1,document.getElementById("button").style.opacity=1),2==d.type||3==d.type?document.getElementById("squeeze_text").style.opacity=1:document.getElementById("squeeze_text").style.opacity=.2,document.getElementById("clockwise_text").style.opacity=1,4==d.type&&g?(document.getElementById("start_text").innerHTML="Start / end",document.getElementById("end_text").innerHTML="Half way"):(document.getElementById("start_text").innerHTML="Start",document.getElementById("end_text").innerHTML="End"),document.getElementById("auto_text").style.opacity=1}window.addEventListener("blur",(function(e){h=!1,_()})),window.addEventListener("focus",(function(e){h=!0,window.postMessage("internalRequest",JSON.stringify({action:"getSelection"})),M()})),document.getElementById("button").addEventListener("click",(function(e){e.preventDefault(),B()})),document.body.addEventListener("keyup",(function(e){13===e.keyCode&&B()})),window.setSelection=function(e){v(e)},document.getElementById("start_width").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=a.w),e.target.value=t,"linked"==document.getElementById("link_start").className)if(0==a.w&&0==a.h)a.h=t,document.getElementById("start_height").value=a.h;else{var n=a.w?t/a.w:1;a.h=Math.decimal(a.h*n,2),document.getElementById("start_height").value=a.h}a.w=t,y&&p&&B()})),document.getElementById("start_height").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=a.h),e.target.value=t,"linked"==document.getElementById("link_start").className)if(0==a.w&&0==a.h)a.w=t,document.getElementById("start_width").value=a.w;else{var n=a.h?t/a.h:1;a.w=Math.decimal(a.w*n,2),document.getElementById("start_width").value=a.w}a.h=t,y&&p&&B()})),document.getElementById("start_rotation").addEventListener("change",(function(e){var t=Math.abs((parseFloat(e.target.value)+360)%360);isNaN(t)&&(t=a.deg),e.target.value=t,a.deg=t,y&&p&&B()})),document.getElementById("link_start_container").addEventListener("click",(function(e){if("disabled"!=document.getElementById("link_start").getAttribute("disabled")){var t=document.getElementById("link_start").className;document.getElementById("link_start").className="linked"==t?"unlinked":"linked"}})),document.getElementById("end_width").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=i.w),e.target.value=t,"linked"==document.getElementById("link_end").className)if(0==i.w&&0==i.h)i.h=t,document.getElementById("end_height").value=i.h;else{var n=i.w?t/i.w:1;i.h=Math.decimal(i.h*n,2),document.getElementById("end_height").value=i.h}i.w=t,y&&p&&B()})),document.getElementById("end_height").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=i.h),e.target.value=t,"linked"==document.getElementById("link_end").className)if(0==i.w&&0==i.h)i.w=t,document.getElementById("end_width").value=i.w;else{var n=i.h?t/i.h:1;i.w=Math.decimal(i.w*n,2),document.getElementById("end_width").value=i.w}i.h=t,y&&p&&B()})),document.getElementById("end_rotation").addEventListener("change",(function(e){var t=Math.decimal(Math.abs((parseFloat(e.target.value)+360)%360),2);isNaN(t)&&(t=i.deg),e.target.value=t,i.deg=t,y&&p&&B()})),document.getElementById("link_end_container").addEventListener("click",(function(e){if("disabled"!=document.getElementById("link_end").getAttribute("disabled")){var t=document.getElementById("link_end").className;document.getElementById("link_end").className="linked"==t?"unlinked":"linked"}})),document.getElementById("loops").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);isNaN(t)&&(t=o),t>250&&(t=250),t<=.25&&(t=.25),o=t,e.target.value=o,y&&p&&B()})),document.getElementById("points").addEventListener("change",(function(e){var t=Math.abs(Math.round(parseFloat(e.target.value)));isNaN(t)&&(t=l),t>250&&(t=250),t<2&&(t=2),l=t,e.target.value=l,y&&p&&B()})),document.getElementById("timing").addEventListener("change",(function(e){s=e.target.value,M(),y&&p&&B()})),document.getElementById("mirror").addEventListener("change",(function(e){4==d.type&&(b(),document.getElementById("start_width").value=Math.decimal(a.w,2),document.getElementById("start_height").value=Math.decimal(a.h,2),document.getElementById("start_rotation").value=Math.decimal(a.deg,2),document.getElementById("end_width").value=Math.decimal(i.w,2),document.getElementById("end_height").value=Math.decimal(i.h,2),document.getElementById("end_rotation").value=Math.decimal(i.deg,2),g=!g,M(),y&&p&&B())})),document.getElementById("smooth").addEventListener("change",(function(e){var t=Math.abs(Math.round(parseFloat(e.target.value)));isNaN(t)&&(t=c),t>500&&(t=500),t<0&&(t=0),c=t,e.target.value=c,y&&p&&B()})),document.getElementById("power").addEventListener("change",(function(e){var t=Math.abs(Math.round(parseFloat(e.target.value)));isNaN(t)&&(t=c),t>100&&(t=100),t<0&&(t=0),r=t,e.target.value=r,y&&p&&B()})),document.getElementById("squeeze").addEventListener("change",(function(e){(m=e.target.checked)&&3==d.type&&(d.type=2),m||2!=d.type||(d.type=3),w(),M(),y&&p&&B()})),document.getElementById("clockwise").addEventListener("change",(function(e){u=e.target.checked,y&&p&&B()})),document.getElementById("auto").addEventListener("change",(function(e){y=e.target.checked,M(),y&&p&&B()}))}]);