!function(e){var t={};function n(d){if(t[d])return t[d].exports;var a=t[d]={i:d,l:!1,exports:{}};return e[d].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,d){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(d,a,function(t){return e[t]}.bind(null,a));return d},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n="https://www.design-dude.nl/apps/ddSpiral/",d={type:4,shape:"",isSpiral:!1,pathID:"",startID:"",endID:"",parentID:"",theme:""},a={x:0,y:0,w:0,h:0,deg:0,worldDeg:0},i={x:0,y:0,w:0,h:0,deg:0,worldDeg:0},o={startID:!1,endID:!1,pathID:!1},l=10,c=4,s="linear",r=100,m=100,u=!0,g=!1,y=!1,h=!1,E=!1,p=!1,I=!1,f=["start_width","start_height","start_rotation","end_width","end_height","end_rotation","loops","points","timing","smooth","power","squeeze","clockwise","mirror","auto","clear"];function B(e){window.postMessage("followLink",e)}Math.decimal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},Math.degrees=function(e){return(e+360)%360},window.internalResponse=function(e){console.log("requestedData",e)},window.addEventListener("load",(function(){M("Loading...","#FF5B02"),document.addEventListener("contextmenu",(function(e){e&&e.preventDefault()})),document.getElementById("github").addEventListener("click",(function(e){B("https://github.com/Design-Dude/ddSpiral/blob/main/README.md")})),document.getElementById("coffeelink").style.display="none",document.getElementById("coffeelink").setAttribute("goto","https://buymeacoffee.com/mastermek"),document.getElementById("coffeelink").addEventListener("click",(function(e){B(e.target.parentElement.getAttribute("goto"))})),window.postMessage("internalRequest",JSON.stringify({action:"getSelection"})),setTimeout((function(){document.getElementById("ddVersion").setAttribute("version","  v1.1.3  ")}),250),v(n+"info.php").then((function(e){!(e=JSON.parse(e))||"update"!=e.action&&"info"!=e.action||(document.getElementById("bmac").innerHTML=e[0].info,document.getElementById("bmacimg").setAttribute("src",n+e[0].image),document.getElementById("bmacimgdark").setAttribute("src",n+e[0].image_dark),document.getElementById("coffeelink").setAttribute("goto",e[0].link));var t=!1,d=!1;for(var a in e)e[a]&&e[a].version&&("v1.1.3"===e[a].version||"any"===e[a].version)&&("v1.1.3"===e[a].version&&(d=!0),!1!==t&&"any"!==t.version||(t=e[a]));d&&Math.random()<.5&&(t=!1),t&&(document.getElementById("bmac").innerHTML=t.info,t.image&&t.image_dark?(document.getElementById("bmacimg").setAttribute("src",n+t.image),document.getElementById("bmacimgdark").setAttribute("src",n+t.image_dark)):(document.getElementById("bmacimg").remove(),document.getElementById("bmacimgdark").remove(),document.getElementById("bmac").style.height="44px",document.getElementById("bmac").style.paddingLeft="0",document.getElementById("bmac").style.paddingTop="9px"),document.getElementById("coffeelink").setAttribute("goto",t.link)),document.getElementById("coffeelink").style.display="flex"})).catch((function(e){document.getElementById("coffeelink").style.display="flex"}))}));var v=function(e){return new Promise((function(t,n){e&&""!=e?fetch(e).then((function(e){t(e.text())})).then((function(e){t(e?JSON.parse(e):{})})).catch((function(e){n(e)})):n("No url provided")}))};function b(){document.getElementById("button").innerHTML="Update",I=!0,a.deg=Math.degrees(a.deg-a.worldDeg),i.deg=Math.degrees(i.deg-i.worldDeg);var e={loops:l,points:c,smooth:r,timing:s,power:m,squeeze:!(0!=document.getElementById("squeeze").disabled||!g),mirror:!(0!=document.getElementById("mirror").disabled||!y),clockwise:u,auto:h,type:d.type,pathID:d.pathID,startID:d.startID,endID:d.endID,parentID:d.parentID},t={start_val:a,end_val:i,settings:e,action:"spiralise"};window.postMessage("internalRequest",JSON.stringify(t)),L(),a.deg=Math.degrees(a.deg+a.worldDeg),i.deg=Math.degrees(i.deg+i.worldDeg)}function k(e){document.getElementById("button").innerHTML="Spiralise!",I=!1,d=e.selection,a=e.start_val,i=e.end_val,l="undefined"!=d.loops&&d.loops?d.loops:l,document.getElementById("loops").value=l,c="undefined"!=d.points&&d.points?d.points:c,document.getElementById("points").value=c,r="undefined"!=d.smooth&&d.smooth?100*d.smooth:r,document.getElementById("smooth").value=r,s="undefined"!=d.timing&&d.timing?d.timing:s,document.getElementById("timing").value=s,m="undefined"!=d.power&&d.power?50*d.power:m,document.getElementById("power").value=m,(g="undefined"!=d.squeeze?d.squeeze:g)&&(1==d.type||d.type>3)&&(g=!1),2!=d.type||g||(d.type=3),document.getElementById("squeeze").checked=g,y="undefined"!=d.mirror?d.mirror:y,document.getElementById("mirror").checked=y,u="undefined"!=d.clockwise?d.clockwise:u,document.getElementById("clockwise").checked=u,h="undefined"!=d.auto?d.auto:h,document.getElementById("auto").checked=h,4==d.type&&y&&w(),a.deg=Math.degrees(a.deg+a.worldDeg),i.deg=Math.degrees(i.deg+i.worldDeg),document.getElementById("start_width").value=Math.decimal(a.w,2),document.getElementById("start_height").value=Math.decimal(a.h,2),document.getElementById("start_rotation").value=Math.decimal(a.deg,2),document.getElementById("end_width").value=Math.decimal(i.w,2),document.getElementById("end_height").value=Math.decimal(i.h,2),document.getElementById("end_rotation").value=Math.decimal(i.deg,2),_(),settings.theme=d.theme,"dark"===settings.theme?document.body.classList.add("dark"):document.body.classList.remove("dark"),p&&d.type?L():D()}function w(){var e=a.w,t=a.h,n=a.deg;a.w=i.w,a.h=i.h,a.deg=i.deg,i.w=e,i.h=t,i.deg=n}function _(){var e=d.isSpiral?"spiral!":"line";switch(d.type){case 1:M("Wind <span>around the center</span> of that object","dark"===settings.theme?"#DFDFDF":"black");break;case 2:M("Force <span>inside</span> that "+d.shape,"dark"===settings.theme?"#DFDFDF":"black");break;case 3:M("Bend <span>around the center</span> of that "+d.shape,"dark"===settings.theme?"#DFDFDF":"black");break;case 4:M("Twist <span>around</span> that "+e,"dark"===settings.theme?"#DFDFDF":"black");break;case 5:M("Stretch <span>between</span> those objects","dark"===settings.theme?"#DFDFDF":"black");break;case 6:M("Curve <span>along the route</span> of that "+e,"dark"===settings.theme?"#DFDFDF":"black");break;default:M("<span>Select at least 1 and at most 2 objects and/or an open path!</span>","#FF5B02"),D()}}function M(e,t){document.getElementById("info").innerHTML=e,document.getElementById("info").style.color=t}function D(){for(var e=0;e<f.length;e++){document.getElementById(f[e]).setAttribute("disabled",""),!d.type||g&&(f[e].indexOf("start")>-1||f[e].indexOf("end")>-1)||(d.type<2||d.type>3)&&"squeeze"==f[e]?document.getElementById(f[e]).style.opacity="squeeze"==f[e]||"clockwise"==f[e]||"mirror"==f[e]||"auto"==f[e]||"clear"==f[e]?.5:0:document.getElementById(f[e]).style.opacity="squeeze"==f[e]||"clockwise"==f[e]||"mirror"==f[e]||"auto"==f[e]||"clear"==f[e]?.5:.3;var t=document.getElementById(f[e]).parentElement;t.classList.contains("textfield")&&(t.setAttribute("disabled","disabled"),t.style.backgroundColor="dark"===settings.theme?"#282828":"#F6F6F6")}document.getElementById("link_start").setAttribute("disabled","disabled"),document.getElementById("link_start").style.opacity=.3,document.getElementById("link_end").setAttribute("disabled","disabled"),document.getElementById("link_end").style.opacity=.3,document.getElementById("button").setAttribute("disabled","disabled"),document.getElementById("button").style.opacity=.3,document.getElementById("squeeze_text").style.opacity=.2,document.getElementById("clockwise_text").style.opacity=.2,document.getElementById("mirror_text").style.opacity=.2,document.getElementById("auto_text").style.opacity=.2,document.getElementById("clear_text").style.opacity=.2}function L(){var e=document.getElementById("squeeze").checked;document.getElementById("mirror_text").style.opacity=1;for(var t=0;t<f.length;t++)if("power"==f[t]&&"linear"==s){document.getElementById(f[t]).setAttribute("disabled",""),document.getElementById(f[t]).style.opacity=0;var n=document.getElementById(f[t]).parentElement;n.classList.contains("textfield")&&(n.setAttribute("disabled","disabled"),n.style.backgroundColor="dark"===settings.theme?"#282828":"#F6F6F6")}else if("mirror"==f[t]&&4!=d.type)document.getElementById(f[t]).disabled=!0,document.getElementById("mirror_text").style.opacity=.2;else if(e&&(f[t].indexOf("start")>-1||f[t].indexOf("end")>-1)||(d.type<2||d.type>3)&&"squeeze"==f[t]){document.getElementById(f[t]).setAttribute("disabled",""),document.getElementById(f[t]).style.opacity="squeeze"==f[t]||"clockwise"==f[t]?.5:0;var a=document.getElementById(f[t]).parentElement;a.classList.contains("textfield")&&(a.setAttribute("disabled","disabled"),a.style.backgroundColor="dark"===settings.theme?"#282828":"#F6F6F6")}else{document.getElementById(f[t]).disabled=!1,document.getElementById(f[t]).style.opacity=1;var i=document.getElementById(f[t]).parentElement;i.classList.contains("textfield")&&(i.setAttribute("disabled",""),i.style.backgroundColor="dark"===settings.theme?"#2E2E2E":"#EDEDED")}e?(document.getElementById("link_start").setAttribute("disabled","disabled"),document.getElementById("link_start").style.opacity=.3,document.getElementById("link_end").setAttribute("disabled","disabled"),document.getElementById("link_end").style.opacity=.3):(document.getElementById("link_start").setAttribute("disabled",""),document.getElementById("link_start").style.opacity=1,document.getElementById("link_end").setAttribute("disabled",""),document.getElementById("link_end").style.opacity=1),h&&I?(document.getElementById("button").setAttribute("disabled","disabled"),document.getElementById("button").style.opacity=.3):(document.getElementById("button").disabled=!1,document.getElementById("button").style.opacity=1),2==d.type||3==d.type?document.getElementById("squeeze_text").style.opacity=1:document.getElementById("squeeze_text").style.opacity=.2,document.getElementById("clockwise_text").style.opacity=1,4==d.type&&y?(document.getElementById("start_text").innerHTML="Start / end",document.getElementById("end_text").innerHTML="Half way"):(document.getElementById("start_text").innerHTML="Start",document.getElementById("end_text").innerHTML="End"),document.getElementById("auto_text").style.opacity=1,I?(document.getElementById("clear_text").style.opacity=1,document.getElementById("clear").disabled=!1,document.getElementById("clear").style.opacity=1):(document.getElementById("clear_text").style.opacity=.2,document.getElementById("clear").setAttribute("disabled",""))}window.addEventListener("blur",(function(e){if(p=!1,D(),E){var t={settings:{pathID:o.pathID,startID:o.startID,endID:o.endID},action:"clear"};window.postMessage("internalRequest",JSON.stringify(t)),E=!1,document.getElementById("clear").checked=E}})),window.addEventListener("focus",(function(e){p=!0,window.postMessage("internalRequest",JSON.stringify({action:"getSelection"})),L()})),document.getElementById("button").addEventListener("click",(function(e){e.preventDefault(),b()})),document.body.addEventListener("keyup",(function(e){13===e.keyCode&&b()})),window.setSelection=function(e){k(e)},document.getElementById("start_width").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=a.w),e.target.value=t,"linked"==document.getElementById("link_start").className)if(0==a.w&&0==a.h)a.h=t,document.getElementById("start_height").value=a.h;else{var n=a.w?t/a.w:1;a.h=Math.decimal(a.h*n,2),document.getElementById("start_height").value=a.h}a.w=t,h&&I&&b()})),document.getElementById("start_height").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=a.h),e.target.value=t,"linked"==document.getElementById("link_start").className)if(0==a.w&&0==a.h)a.w=t,document.getElementById("start_width").value=a.w;else{var n=a.h?t/a.h:1;a.w=Math.decimal(a.w*n,2),document.getElementById("start_width").value=a.w}a.h=t,h&&I&&b()})),document.getElementById("start_rotation").addEventListener("change",(function(e){var t=Math.decimal((parseFloat(e.target.value)+3600)%360,2);isNaN(t)&&(t=a.deg),e.target.value=t,a.deg=t,h&&I&&b()})),document.getElementById("link_start_container").addEventListener("click",(function(e){if("disabled"!=document.getElementById("link_start").getAttribute("disabled")){var t=document.getElementById("link_start").className;document.getElementById("link_start").className="linked"==t?"unlinked":"linked"}})),document.getElementById("end_width").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=i.w),e.target.value=t,"linked"==document.getElementById("link_end").className)if(0==i.w&&0==i.h)i.h=t,document.getElementById("end_height").value=i.h;else{var n=i.w?t/i.w:1;i.h=Math.decimal(i.h*n,2),document.getElementById("end_height").value=i.h}i.w=t,h&&I&&b()})),document.getElementById("end_height").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);if(isNaN(t)&&(t=i.h),e.target.value=t,"linked"==document.getElementById("link_end").className)if(0==i.w&&0==i.h)i.w=t,document.getElementById("end_width").value=i.w;else{var n=i.h?t/i.h:1;i.w=Math.decimal(i.w*n,2),document.getElementById("end_width").value=i.w}i.h=t,h&&I&&b()})),document.getElementById("end_rotation").addEventListener("change",(function(e){var t=Math.decimal((parseFloat(e.target.value)+3600)%360,2);isNaN(t)&&(t=i.deg),e.target.value=t,i.deg=t,h&&I&&b()})),document.getElementById("link_end_container").addEventListener("click",(function(e){if("disabled"!=document.getElementById("link_end").getAttribute("disabled")){var t=document.getElementById("link_end").className;document.getElementById("link_end").className="linked"==t?"unlinked":"linked"}})),document.getElementById("loops").addEventListener("change",(function(e){var t=Math.decimal(Math.abs(parseFloat(e.target.value)),2);isNaN(t)&&(t=l),t>250&&(t=250),t<=.25&&(t=.25),l=t,e.target.value=l,h&&I&&b()})),document.getElementById("points").addEventListener("change",(function(e){var t=Math.abs(Math.round(parseFloat(e.target.value)));isNaN(t)&&(t=c),t>250&&(t=250),t<2&&(t=2),c=t,e.target.value=c,h&&I&&b()})),document.getElementById("timing").addEventListener("change",(function(e){s=e.target.value,L(),h&&I&&b()})),document.getElementById("mirror").addEventListener("change",(function(e){4==d.type&&(w(),document.getElementById("start_width").value=Math.decimal(a.w,2),document.getElementById("start_height").value=Math.decimal(a.h,2),document.getElementById("start_rotation").value=Math.decimal(a.deg,2),document.getElementById("end_width").value=Math.decimal(i.w,2),document.getElementById("end_height").value=Math.decimal(i.h,2),document.getElementById("end_rotation").value=Math.decimal(i.deg,2),y=!y,L(),h&&I&&b())})),document.getElementById("smooth").addEventListener("change",(function(e){var t=Math.decimal(parseFloat(e.target.value),2);isNaN(t)&&(t=r),t>500&&(t=500),t<0&&(t=0),r=t,e.target.value=r,h&&I&&b()})),document.getElementById("power").addEventListener("change",(function(e){var t=Math.decimal(parseFloat(e.target.value),2);isNaN(t)&&(t=r),t>500&&(t=500),t<0&&(t=0),m=t,e.target.value=m,h&&I&&b()})),document.getElementById("squeeze").addEventListener("change",(function(e){(g=e.target.checked)&&3==d.type&&(d.type=2),g||2!=d.type||(d.type=3),_(),L(),h&&I&&b()})),document.getElementById("clockwise").addEventListener("change",(function(e){u=e.target.checked,h&&I&&b()})),document.getElementById("auto").addEventListener("change",(function(e){h=e.target.checked,L(),h&&I&&b()})),document.getElementById("clear").addEventListener("change",(function(e){(E=e.target.checked)&&(o.startID=d.startID,o.endID=d.endID,o.pathID=d.pathID)}))}]);